{% load static %}
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <meta charset="utf-8"/>
	<title>test</title>
	<style type="text/css">
	ul {
		float:left;
		list-style:none;
		margin:0;
		padding:0;
	}
    table{
        text-align: center;
        border: 1px solid grey;
    }
    th{
        border-right: 1px solid gray;
    }
    td{
        border-right: 1px solid gray;
    }
    #map{
        width: auto;
        height:350px;
    }
	</style>
</head>
<body>
    <p id="demo"></p>
	<div id="stock">
		<table>
            <tr>
                {% for key, value in stock.items %}
                <th>{{ key }}</th>
                <td>{{ value }}</td>
                {% endfor %}
            </tr>


           <!-- <tr>
               {% for i in stock.keys %}
                   <td>{{ i }}</td>   
               {% endfor %}
           </tr>
           <tr>
               {% for i in stock.values %}
                   <td>{{ i }}</td>   
               {% endfor %}
           </tr> -->
        </table>
	</div>
    <div id="map" style="width:100%;height:350px;"></div>
    <script type="text/javascript">
        
    </script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=f3d2075fccd2daa2b4324fc9e39457e6&libraries=services"></script>
    <script type="text/javascript">
        var seoul = {{ in_seoul|safe }}; // 수도권 지점 정보 받아오기
        var not_seoul = {{ not_seoul|safe }}; // 수도권 지점 정보 받아오기
        var store = seoul.concat(not_seoul);
        var markers = []; // 마커를 담을 배열
        var positions = new Array(); // 지점 정보를 담을 배열

        var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
            mapOption = {
                center: new kakao.maps.LatLng(37.535442, 126.9883856), // 지도의 중심좌표
                level: 8 // 지도의 확대 레벨
            };
        var map = new kakao.maps.Map(mapContainer, mapOption); // 지도 생성  
        
        
        for (var i = 0; i < store.length; i++){
            var p = new Object(); // positions에 담을 객체 생성
            p.title = store[i].fields.place_name;
            p.road_address_name = store[i].fields.road_address_name;
            p.phone = store[i].fields.phone;
            x = Number(store[i].fields.x);
            y = Number(store[i].fields.y);
            p.latlng = new kakao.maps.LatLng(y, x);
            positions.push(p)
        }

        for (var i = 0; i < positions.length; i ++) {
            // 마커를 생성합니다
            var marker = new kakao.maps.Marker({
                map: map, // 마커를 표시할 지도
                position: positions[i].latlng, // 마커를 표시할 위치
                title : positions[i].title, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀이 표시됩니다
            });
        }

        marker.setMap(map); // 마커 지도 위에 표시

        var p = JSON.stringify(positions);
        document.write(p)
    </script>
    <!-- <script type="text/javascript" src="{% static 'js/map.js' %}"></script> -->
</body>
</html>